{% extends "layout.html" %}


{% block beforeContent %}
{{ govukBackLink({
      "text": "Back",
      "href": "javascript: window.history.go(-1)"
    }) 
  }}

{% endblock %}

{% set outgoingTrust = data['trusts'] | getTrustById(data['outgoing-trust-id']) %}

{% block content %}

<div class="govuk-width-container">
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-l"> Close case CI 1004634  </h1>
      <h2 class="govuk-heading-m">{{ outgoingTrust.trust_name }}</h2>

      <form action="/concerns/homepage" method="post">
      
        <div class="govuk-character-count" data-module="govuk-character-count" data-maxlength="500">
          <div class="govuk-form-group">
            <h1 class="govuk-label-wrapper">
              <legend class="govuk-heading-m">
                Rationale for closure
              </legend>
            </h1>
            <textarea class="govuk-textarea govuk-js-character-count auto-resize" id="caseOutcomes" name="caseOutcomes" rows="3" aria-describedby="case outcomes"></textarea>
          </div>
          <div id="with-hint-info" class="govuk-hint govuk-character-count__message" aria-live="polite">
            You can enter up to 500 characters
          </div>
        </div>
      
        <div class="govuk-form-group govuk-!-margin-top-9">
          <fieldset class="govuk-fieldset">

            <legend class="govuk-heading-m">
              Do you need to close this case for monitoring?
            </legend>

            <div class="govuk-radios govuk-radios--conditional" data-module="govuk-radios">
              
              <div class="govuk-radios__item">
                <input class="govuk-radios__input" data-aria-controls="close-for-monitoring-yes" id="monitoring-yes" name="monitoring" type="radio" value="Yes">
                <label class="govuk-label govuk-radios__label" for="monitoring-yes">
                  Yes
                </label>
              </div>

                <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="close-for-monitoring-yes">
                  <div class="govuk-form-group">
                    <legend class="govuk-fieldset__legend govuk-!-font-weight-bold">
                      Date to review
                    </legend>
                    <div class="govuk-date-input" id="dateCreated">
                      <div class="govuk-date-input__item">
                        <div class="govuk-form-group">
                          <label class="govuk-label govuk-date-input__label" for="dateCreatedDay">
                            Day
                          </label>
                          <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="dateCreatedDay" name="dateCreatedDay" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                      <div class="govuk-date-input__item">
                        <div class="govuk-form-group">
                          <label class="govuk-label govuk-date-input__label" for="dateCreatedMonth">
                            Month
                          </label>
                          <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="dateCreatedMonth" name="dateCreatedMonth" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                      <div class="govuk-date-input__item">
                        <div class="govuk-form-group">
                          <label class="govuk-label govuk-date-input__label" for="dateCreatedYear">
                            Year
                          </label>
                          <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="dateCreatedYear" name="dateCreatedYear" type="text" pattern="[0-9]*" inputmode="numeric">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              <div class="govuk-radios__item">
                <input class="govuk-radios__input" data-aria-controls="close-for-monitoring-no" id="monitoring-no" name="monitoring" type="radio" value="No">
                <label class="govuk-label govuk-radios__label" for="monitoring-no">
                  No
                </label>
              </div>

            </div>

          </fieldset>
        </div>

        <!--Close case-->
        <button data-prevent-double-click="true" class="govuk-button govuk-!-margin-top-6" data-module="govuk-button">
          Close case
        </button>
      
      </form>

<!--Auto resize textareas-->
      <script>
        var multipleFields=document.querySelectorAll('.auto-resize');
        for(var i=0; i<multipleFields.length; i++){
        multipleFields[i].addEventListener('input',autoResizeHeight,0);
        }
        // auto resize multiple textarea
        function autoResizeHeight(){
          this.style.height="auto";
          this.style.height= this.scrollHeight+"px";
          this.style.borderColor="green";
        }
      </script>

</div>
  </div>
</div>
{% endblock %}