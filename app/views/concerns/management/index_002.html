<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  {% extends "layout.html" %}
  
  {% block content %}
  {% set trust = data['trusts'] | getTrustById(data['outgoing-trust-id']) %}
  
  <div class="buttons-topOfPage">
    {{ govukButton({ text: "Back to casework", classes: "govuk-button--secondary", href:
    "/concerns/homepage.html" }) }}
    {{ govukButton({ text: "Close case", classes: "govuk-button--warning float__right", href: "/concerns/closure/" }) }}
  </div>  

  <h1 class="govuk-heading-l" name="caseID">
    <span class="govuk-caption-m">Case ID</span>
    10483AC
  </h1>
  <h2 class="govuk-heading-m">{{ outgoingTrust.trust_name }}</h2>
  <a href="#" class="govuk-link">Trust overview (TRAMS)</a>

        <dl class="govuk-summary-list">
                
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">Trust</dt>
                <dd class="govuk-summary-list__value">
                    {{ trust.trust_name }} ({{ trust.region }})
                </dd>
                <dd class="govuk-summary-list__actions">
                <a href="#" class="govuk-link govuk-link--no-visited-state" style="float:right;">Change trust</a>
                </dd>
            </div>

            <div class="govuk-summary-list__row">

                <dt class="govuk-summary-list__key">Concerns</dt>
                <dd class="govuk-summary-list__value">

                    <div>
                        {% if data['concernSubType'] == 'compliance-financial-reporting' %}
                        <span class="caseDetail_type">Compliance: Financial reporting</span>
                        {% elif data['concernSubType'] == 'compliance-financial-returns' %}
                        <span class="caseDetail_type">Compliance: Financial returns</span>
                        {% elif data['concernSubType'] == 'financial-deficit' %}
                        <span class="caseDetail_type">Financial: Deficit</span>
                        {% elif data['concernSubType'] == 'financial-projected-deficit' %}
                        <span class="caseDetail_type">Financial: Projected deficit / Low future surplus</span>
                        {% elif data['concernSubType'] == 'financial-cash-flow-shortfall' %}
                        <span class="caseDetail_type">Financial: Cash flow shortfall</span>
                        {% elif data['concernSubType'] == 'financial-clawback' %}
                        <span class="caseDetail_type">Financial: Clawback</span>
                        {% elif data['concernType'] == 'force-majeure' %}
                        <span class= "caseDetail_type">Force Majeure</span>
                        {% elif data['concernSubType'] == 'governance-governance' %}
                        <span class="caseDetail_type">Governance: Governance</span>
                        {% elif data['concernSubType'] == 'governance-closure' %}
                        <span class= "caseDetail_type">Governance: Closure</span>
                        {% elif data['concernSubType'] == 'governance-executive-pay' %}
                        <span class="caseDetail_type">Governance: Executive Pay</span>
                        {% elif data['concernSubType'] == 'governance-safeguarding' %}
                        <span class="caseDetail_type">Governance: Safeguarding</span>
                        {% elif data['concernSubType'] == 'irregularity-allegations' %}
                        <span class="caseDetail_type">Iregularity: Allegations</span>
                        {% elif data['concernSubType'] == 'irregularity-related-party-transactions' %}
                        <span class="caseDetail_type">Irregularity: Related party transactions - in year</span>
                        {% endif %}

                        {% if data['riskType'] == 'amberGreen' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__amber">Amber</span><span class="govuk-tag ragtag ragtag__green">Green</span></div>
                        {% elif data['riskType'] == 'redAmber' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__red">Red</span><span class="govuk-tag ragtag ragtag__amber">Amber</span></div>
                        {% elif data['riskType'] == 'red' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__red">Red</span></div>
                        {% elif data['riskType'] == 'redPlus' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__redplus">Red Plus</span></div>
                        {% endif %}
                    </div>

                    <div class="concernListing">
                        {% if data['concernSubTypeTwo'] == 'compliance-financial-reporting' %}
                        <span class="caseDetail_type">Compliance: Financial reporting</span>
                        {% elif data['concernSubTypeTwo'] == 'compliance-financial-returns' %}
                        <span class="caseDetail_type">Compliance: Financial returns</span>
                        {% elif data['concernSubTypeTwo'] == 'financial-deficit' %}
                        <span class="caseDetail_type">Financial: Deficit</span>
                        {% elif data['concernSubTypeTwo'] == 'financial-projected-deficit' %}
                        <span class="caseDetail_type">Financial: Projected deficit / Low future surplus</span>
                        {% elif data['concernSubTypeTwo'] == 'financial-cash-flow-shortfall' %}
                        <span class="caseDetail_type">Financial: Cash flow shortfall</span>
                        {% elif data['concernSubTypeTwo'] == 'financial-clawback' %}
                        <span class="caseDetail_type">Financial: Clawback</span>
                        {% elif data['concernTypeTwo'] == 'force-majeure' %}
                        <span class= "caseDetail_type">Force Majeure</span>
                        {% elif data['concernSubTypeTwo'] == 'governance-governance' %}
                        <span class="caseDetail_type">Governance: Governance</span>
                        {% elif data['concernSubTypeTwo'] == 'governance-closure' %}
                        <span class= "caseDetail_type">Governance: Closure</span>
                        {% elif data['concernSubTypeTwo'] == 'governance-executive-pay' %}
                        <span class="caseDetail_type">Governance: Executive Pay</span>
                        {% elif data['concernSubTypeTwo'] == 'governance-safeguarding' %}
                        <span class="caseDetail_type">Governance: Safeguarding</span>
                        {% elif data['concernSubTypeTwo'] == 'irregularity-allegations' %}
                        <span class="caseDetail_type">Iregularity: Allegations</span>
                        {% elif data['concernSubTypeTwo'] == 'irregularity-related-party-transactions' %}
                        <span class="caseDetail_type">Irregularity: Related party transactions - in year</span>
                        {% endif %}

                        {% if data['riskTypeTwo'] == 'amberGreen' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__amber">Amber</span><span class="govuk-tag ragtag ragtag__green">Green</span></div>
                        {% elif data['riskTypeTwo'] == 'redAmber' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__red">Red</span><span class="govuk-tag ragtag ragtag__amber">Amber</span></div>
                        {% elif data['riskTypeTwo'] == 'red' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__red">Red</span></div>
                        {% elif data['riskTypeTwo'] == 'redPlus' %}
                        <div class="tag-block"><span class="govuk-tag ragtag ragtag__redplus">Red Plus</span></div>
                        {% endif %}
                    </div>

                </dd>

                <dd class="govuk-summary-list__actions">
                <a href="#" class="govuk-link govuk-link--no-visited-state" style="float:right;">Edit</a>
                </dd>

            </div>

        </dl>
                
        <!--Accordions-->


        <div class="govuk-accordion"
             data-module="govuk-accordion"
             id="accordion-default">

          <div class="govuk-accordion__section govuk-accordion__section--expanded">
            <div class="govuk-accordion__section-header">
              <h2 class="govuk-accordion__section-heading">
                <span class="govuk-accordion__section-button" id="accordion-default-heading-1">Issue</span>
              </h2>
            </div>
            <div aria-labelledby="accordion-default-heading-1" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-1">
              <a class="govuk-link float__right" href="edit_issue?from=concerns/management/index">Edit</a>
              <div class="details">
                <p>{{ data['issue-detail'] }}</p>
              </div>
            </div>
          </div>

          <div class="govuk-accordion__section govuk-accordion__section--expanded">
            <div class="govuk-accordion__section-header">
              <h2 class="govuk-accordion__section-heading">
                <span class="govuk-accordion__section-button" id="accordion-default-heading-2">Current status</span>
              </h2>
            </div>
            <div aria-labelledby="accordion-default-heading-2" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-2">
              <a class="govuk-link float__right" href="edit_current_status?from=concerns/management/index">Edit</a>
              <div class="details">
                <p>{{ data['current-status-detail'] }}</p>
              </div>
            </div>
          </div>

          <div class="govuk-accordion__section govuk-accordion__section--expanded">
            <div class="govuk-accordion__section-header">
              <h2 class="govuk-accordion__section-heading">
                <span class="govuk-accordion__section-button" id="accordion-default-heading-3">Case aim</span>
              </h2>
            </div>
            <div aria-labelledby="accordion-default-heading-3" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-3">
              <a class="govuk-link float__right" href="edit_case_aim?from=concerns/management/index">Edit</a>
              <div class="details">
                <p>{{ data['case-aim-detail'] }}</p>
              </div>
            </div>
          </div>

          <div class="govuk-accordion__section govuk-accordion__section--expanded">
            <div class="govuk-accordion__section-header">
              <h2 class="govuk-accordion__section-heading">
                <span class="govuk-accordion__section-button" id="accordion-default-heading-4">De-escalation point</span>
              </h2>
            </div>
            <div aria-labelledby="accordion-default-heading-4" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-4">
              <a class="govuk-link float__right" href="edit_deescalation_point?from=concerns/management/index">Edit</a>
              <div class="details">
                <p>{{ data['deescalation-point-detail'] }}</p>
              </div>
            </div>
          </div>

          <div class="govuk-accordion__section govuk-accordion__section--expanded">
            <div class="govuk-accordion__section-header">
              <h2 class="govuk-accordion__section-heading">
                <span class="govuk-accordion__section-button" id="accordion-default-heading-5">Next steps</span>
              </h2>
            </div>
            <div aria-labelledby="accordion-default-heading-5" class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6" id="accordion-default-content-5">
              <a class="govuk-link float__right" href="edit_next_steps?from=concerns/management/index">Edit</a>
              <div class="details">
                <p>{{ data['next-steps-detail'] }}</p>
              </div>
            </div>
          </div>
          
          {% if data['whistleblowerWut'] == 'yes' %}
          <div class="govuk-accordion__section">
            <div class="govuk-accordion__section-header">
              <h2 class="govuk-accordion__section-heading"><span class="govuk-accordion__section-button"
                    id="accordion-default-heading-1">Whistleblower</span></h2>
            </div>
            <div aria-labelledby="accordion-default-heading-1"
                 class="govuk-accordion__section-content govuk-!-margin-top-3 govuk-!-margin-bottom-6"
                 id="accordion-default-content-1">
              <a class="govuk-link float__right" href="edit_whistleblower?from=concerns/management/index">Edit</a>
              <p>{{ data['whistleblower-detail'] }}</p>
            </div>
          </div>{% endif %}
        </div>

       <button class="govuk-button govuk-button--secondary" data-module="govuk-button">
        Add to case
      </button> 

  {% endblock %}

  <!--Auto resize textareas-->
  <script>
    document.addEventListener("DOMContentLoaded", function autoResizeHeight(){
      this.style.height="auto";
      this.style.height= this.scrollHeight+"px";
    });
  </script>

  <script>
    var multipleFields=document.querySelectorAll('.auto-resize');
    for(var i=0; i<multipleFields.length; i++){
    multipleFields[i].addEventListener('input',autoResizeHeight,0);
    }
    // auto resize multiple textarea
    function autoResizeHeight(){
      this.style.height="auto";
      this.style.height= this.scrollHeight+"px";
      this.style.borderColor="green";
    }
  </script>

</body>
</html>
